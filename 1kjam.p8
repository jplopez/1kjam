pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

#include src/globals.lua
#include src/core/env.lua
#include src/core/oop.lua
#include src/core/log.lua
#include src/core/utils.lua
#include src/core/gst.lua
#include src/commons.lua
#include src/entities/board.lua
#include src/entities/tile.lua
#include src/scenes/title.lua
#include src/scenes/game.lua
#include src/scenes/lose.lua

function _init()ln("1kjam started")scene:load(game_scene)end

function _update()scene.current:update()end

function _draw()cls()draw_ui()scene.current:draw()end

function draw_ui()
	-- playable area
	rectfill(32,0,95,127,7)
	-- ui
	?"next:",12,1,7
	?"tiles\n "..pad(tcount,4),97,1,7
	?"key:",1,8,7
	rectfill(17,8,21,12,key[1])
	rectfill(23,8,27,12,key[2])

	--debug
	rectfill(0,20,7,25,7)
	for c=1,8 do
		for r=1,16 do
			local clr=(board:is_empty(c,r) and 7 or board:get(c,r).clr)
			pset(c-1,19+r,clr)
		end
	end
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
